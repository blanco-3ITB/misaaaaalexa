{"ast":null,"code":"var _jsxFileName = \"C:\\\\pod system\\\\frontend\\\\src\\\\pages\\\\MessengerRoutes.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../utils/api';\nimport './Messenger.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MessengerRoutes = () => {\n  _s();\n  const [deliveries, setDeliveries] = useState([]);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [failureModal, setFailureModal] = useState({\n    visible: false,\n    deliveryId: null\n  });\n  const [failureReason, setFailureReason] = useState('');\n  const [assignedRoute, setAssignedRoute] = useState(null);\n  // Proof capture refs/state\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const [useCamera, setUseCamera] = useState(false);\n  const [uploadedProof, setUploadedProof] = useState(null);\n  const [proofModal, setProofModal] = useState({\n    visible: false,\n    deliveryId: null\n  });\n  useEffect(() => {\n    fetchRoutes();\n    // Auto-refresh every 30 seconds (FR-M12: route update notifications)\n    const interval = setInterval(fetchRoutes, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  const fetchRoutes = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/messenger/routes');\n      const rawDeliveries = response.data.deliveries;\n\n      // Extract route info (FR-M03: assigned route for the day)\n      const routes = [...new Set(rawDeliveries.map(d => {\n        var _d$billId;\n        return (_d$billId = d.billId) === null || _d$billId === void 0 ? void 0 : _d$billId.route;\n      }).filter(Boolean))];\n      setAssignedRoute(routes.length === 1 ? routes[0] : `Multiple Routes (${routes.length})`);\n\n      // Sort by sequence/address for optimization (FR-M04: optimized delivery sequence)\n      const optimizedDeliveries = sortDeliveries(rawDeliveries);\n      setDeliveries(optimizedDeliveries);\n      setStats(response.data.stats);\n    } catch (error) {\n      console.error('Error fetching routes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Simple optimization: group by route, then sort by pending status first, then address\n  const sortDeliveries = items => {\n    return items.sort((a, b) => {\n      var _a$billId, _b$billId;\n      const statusOrder = {\n        pending: 0,\n        assigned: 1,\n        delivered: 2,\n        failed: 3\n      };\n      const statusDiff = (statusOrder[a.status] || 0) - (statusOrder[b.status] || 0);\n      if (statusDiff !== 0) return statusDiff;\n      const addrA = ((_a$billId = a.billId) === null || _a$billId === void 0 ? void 0 : _a$billId.address) || '';\n      const addrB = ((_b$billId = b.billId) === null || _b$billId === void 0 ? void 0 : _b$billId.address) || '';\n      return addrA.localeCompare(addrB);\n    });\n  };\n  const filteredDeliveries = filter === 'all' ? deliveries : deliveries.filter(d => d.status === filter);\n  const handleStatusUpdate = async (deliveryId, newStatus, reason = '') => {\n    try {\n      await api.put(`/messenger/deliveries/${deliveryId}/status`, {\n        status: newStatus,\n        failureReason: reason,\n        notes: reason\n      });\n      fetchRoutes();\n    } catch (error) {\n      console.error('Error updating status:', error);\n      alert('Error updating delivery status');\n    }\n  };\n  const openFailureModal = deliveryId => {\n    setFailureModal({\n      visible: true,\n      deliveryId\n    });\n    setFailureReason('');\n  };\n  const submitFailure = () => {\n    if (!failureReason.trim()) {\n      alert('Please enter a failure reason');\n      return;\n    }\n    handleStatusUpdate(failureModal.deliveryId, 'failed', failureReason);\n    setFailureModal({\n      visible: false,\n      deliveryId: null\n    });\n    setFailureReason('');\n  };\n\n  // Proof modal helpers: require proof before marking delivered\n  const openProofModal = deliveryId => {\n    setProofModal({\n      visible: true,\n      deliveryId\n    });\n    setUploadedProof(null);\n    setUseCamera(false);\n  };\n  const startCamera = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment'\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        setUseCamera(true);\n      }\n    } catch (error) {\n      alert('Could not access camera: ' + error.message);\n    }\n  };\n  const capturePhoto = () => {\n    if (videoRef.current && canvasRef.current) {\n      const context = canvasRef.current.getContext('2d');\n      canvasRef.current.width = videoRef.current.videoWidth || 640;\n      canvasRef.current.height = videoRef.current.videoHeight || 480;\n      context.drawImage(videoRef.current, 0, 0, canvasRef.current.width, canvasRef.current.height);\n      const imageData = canvasRef.current.toDataURL('image/jpeg');\n      setUploadedProof(imageData);\n      setUseCamera(false);\n      if (videoRef.current.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n      }\n    }\n  };\n  const handleProofFile = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = event => setUploadedProof(event.target.result);\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleUploadProof = async () => {\n    if (!proofModal.deliveryId || !uploadedProof) {\n      alert('Please capture or upload a photo first');\n      return;\n    }\n    try {\n      await api.post(`/messenger/deliveries/${proofModal.deliveryId}/proof`, {\n        imageData: uploadedProof\n      });\n      alert('Proof uploaded and delivery marked as delivered');\n      setProofModal({\n        visible: false,\n        deliveryId: null\n      });\n      setUploadedProof(null);\n      fetchRoutes();\n    } catch (error) {\n      console.error('Error uploading proof:', error);\n      alert('Error uploading proof');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading your routes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"messenger-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Routes & Tasks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Track your daily deliveries and update status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), stats && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Total Tasks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box success\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.delivered\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Delivered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box warning\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.pending\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.failed\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'all' ? 'active' : ''}`,\n        onClick: () => setFilter('all'),\n        children: \"All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'pending' ? 'active' : ''}`,\n        onClick: () => setFilter('pending'),\n        children: \"Pending\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'delivered' ? 'active' : ''}`,\n        onClick: () => setFilter('delivered'),\n        children: \"Delivered\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'failed' ? 'active' : ''}`,\n        onClick: () => setFilter('failed'),\n        children: \"Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sequence-note\",\n      children: \"Deliveries are optimized by status and address sequence\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"deliveries-list\",\n      children: filteredDeliveries.map(delivery => {\n        var _delivery$billId, _delivery$billId2, _delivery$billId3, _delivery$billId4, _delivery$billId5;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delivery-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: ((_delivery$billId = delivery.billId) === null || _delivery$billId === void 0 ? void 0 : _delivery$billId.customerName) || 'Unknown Customer'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"delivery-account\",\n                children: [\"Account: \", (_delivery$billId2 = delivery.billId) === null || _delivery$billId2 === void 0 ? void 0 : _delivery$billId2.accountNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status-badge status-${delivery.status}`,\n              children: delivery.status.toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value\",\n                children: (_delivery$billId3 = delivery.billId) === null || _delivery$billId3 === void 0 ? void 0 : _delivery$billId3.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"Route:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value\",\n                children: (_delivery$billId4 = delivery.billId) === null || _delivery$billId4 === void 0 ? void 0 : _delivery$billId4.route\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"\\uD83D\\uDCC4 Bill Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value\",\n                children: ((_delivery$billId5 = delivery.billId) === null || _delivery$billId5 === void 0 ? void 0 : _delivery$billId5.billType) === 'disconnection_notice' ? 'Disconnection Notice' : 'Regular Bill'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-actions\",\n            children: delivery.status === 'pending' || delivery.status === 'assigned' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-btn success\",\n                onClick: () => openProofModal(delivery._id),\n                children: \"Mark Delivered\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-btn warning\",\n                onClick: () => openFailureModal(delivery._id),\n                children: \"Mark Failed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"completed-badge\",\n              children: delivery.status === 'delivered' ? 'Completed' : 'Failed'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), delivery.failureReason && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-failure-reason\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Reason:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this), \" \", delivery.failureReason]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this)]\n        }, delivery._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), filteredDeliveries.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-state\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"No \", filter !== 'all' ? filter : '', \" deliveries at the moment.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 9\n    }, this), proofModal.visible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setProofModal({\n        visible: false,\n        deliveryId: null\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Upload Proof of Delivery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Capture or upload photo evidence before marking delivered.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"upload-btn camera\",\n            onClick: startCamera,\n            children: \"Use Camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"upload-btn gallery\",\n            onClick: () => {\n              var _fileInputRef$current;\n              return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n            },\n            children: \"Upload from Gallery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          accept: \"image/*\",\n          style: {\n            display: 'none'\n          },\n          onChange: handleProofFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this), useCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"camera-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            autoPlay: true,\n            playsInline: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"capture-btn\",\n            onClick: capturePhoto,\n            children: \"\\uD83D\\uDCF8 Capture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this), uploadedProof && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-preview\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: uploadedProof,\n            alt: \"Proof\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => setProofModal({\n              visible: false,\n              deliveryId: null\n            }),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: handleUploadProof,\n            children: \"Upload & Mark Delivered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }, this), failureModal.visible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setFailureModal({\n        visible: false,\n        deliveryId: null\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Mark Delivery as Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please provide the reason for failure:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: failureReason,\n          onChange: e => setFailureReason(e.target.value),\n          placeholder: \"Enter reason (e.g., Customer not home, Address not found, etc.)\",\n          className: \"failure-textarea\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => setFailureModal({\n              visible: false,\n              deliveryId: null\n            }),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: submitFailure,\n            children: \"Confirm Failed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n};\n_s(MessengerRoutes, \"wjh0LvSsrEzlbiWgPcDqbbkzblM=\");\n_c = MessengerRoutes;\nexport default MessengerRoutes;\nvar _c;\n$RefreshReg$(_c, \"MessengerRoutes\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","jsxDEV","_jsxDEV","Fragment","_Fragment","MessengerRoutes","_s","deliveries","setDeliveries","stats","setStats","loading","setLoading","filter","setFilter","failureModal","setFailureModal","visible","deliveryId","failureReason","setFailureReason","assignedRoute","setAssignedRoute","videoRef","canvasRef","fileInputRef","useCamera","setUseCamera","uploadedProof","setUploadedProof","proofModal","setProofModal","fetchRoutes","interval","setInterval","clearInterval","response","get","rawDeliveries","data","routes","Set","map","d","_d$billId","billId","route","Boolean","length","optimizedDeliveries","sortDeliveries","error","console","items","sort","a","b","_a$billId","_b$billId","statusOrder","pending","assigned","delivered","failed","statusDiff","status","addrA","address","addrB","localeCompare","filteredDeliveries","handleStatusUpdate","newStatus","reason","put","notes","alert","openFailureModal","submitFailure","trim","openProofModal","startCamera","stream","navigator","mediaDevices","getUserMedia","video","facingMode","current","srcObject","message","capturePhoto","context","getContext","width","videoWidth","height","videoHeight","drawImage","imageData","toDataURL","getTracks","forEach","track","stop","handleProofFile","e","file","target","files","reader","FileReader","onload","event","result","readAsDataURL","handleUploadProof","post","className","children","fileName","_jsxFileName","lineNumber","columnNumber","total","onClick","delivery","_delivery$billId","_delivery$billId2","_delivery$billId3","_delivery$billId4","_delivery$billId5","customerName","accountNumber","toUpperCase","billType","_id","stopPropagation","_fileInputRef$current","click","type","ref","accept","style","display","onChange","autoPlay","playsInline","src","alt","value","placeholder","_c","$RefreshReg$"],"sources":["C:/pod system/frontend/src/pages/MessengerRoutes.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport api from '../utils/api';\r\nimport './Messenger.css';\r\n\r\nconst MessengerRoutes = () => {\r\n  const [deliveries, setDeliveries] = useState([]);\r\n  const [stats, setStats] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all');\r\n  const [failureModal, setFailureModal] = useState({ visible: false, deliveryId: null });\r\n  const [failureReason, setFailureReason] = useState('');\r\n  const [assignedRoute, setAssignedRoute] = useState(null);\r\n  // Proof capture refs/state\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const [useCamera, setUseCamera] = useState(false);\r\n  const [uploadedProof, setUploadedProof] = useState(null);\r\n  const [proofModal, setProofModal] = useState({ visible: false, deliveryId: null });\r\n\r\n  useEffect(() => {\r\n    fetchRoutes();\r\n    // Auto-refresh every 30 seconds (FR-M12: route update notifications)\r\n    const interval = setInterval(fetchRoutes, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchRoutes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('/messenger/routes');\r\n      const rawDeliveries = response.data.deliveries;\r\n      \r\n      // Extract route info (FR-M03: assigned route for the day)\r\n      const routes = [...new Set(rawDeliveries.map(d => d.billId?.route).filter(Boolean))];\r\n      setAssignedRoute(routes.length === 1 ? routes[0] : `Multiple Routes (${routes.length})`);\r\n      \r\n      // Sort by sequence/address for optimization (FR-M04: optimized delivery sequence)\r\n      const optimizedDeliveries = sortDeliveries(rawDeliveries);\r\n      setDeliveries(optimizedDeliveries);\r\n      setStats(response.data.stats);\r\n    } catch (error) {\r\n      console.error('Error fetching routes:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Simple optimization: group by route, then sort by pending status first, then address\r\n  const sortDeliveries = (items) => {\r\n    return items.sort((a, b) => {\r\n      const statusOrder = { pending: 0, assigned: 1, delivered: 2, failed: 3 };\r\n      const statusDiff = (statusOrder[a.status] || 0) - (statusOrder[b.status] || 0);\r\n      if (statusDiff !== 0) return statusDiff;\r\n      \r\n      const addrA = a.billId?.address || '';\r\n      const addrB = b.billId?.address || '';\r\n      return addrA.localeCompare(addrB);\r\n    });\r\n  };\r\n\r\n  const filteredDeliveries = filter === 'all' \r\n    ? deliveries \r\n    : deliveries.filter(d => d.status === filter);\r\n\r\n  const handleStatusUpdate = async (deliveryId, newStatus, reason = '') => {\r\n    try {\r\n      await api.put(`/messenger/deliveries/${deliveryId}/status`, {\r\n        status: newStatus,\r\n        failureReason: reason,\r\n        notes: reason,\r\n      });\r\n      fetchRoutes();\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      alert('Error updating delivery status');\r\n    }\r\n  };\r\n\r\n  const openFailureModal = (deliveryId) => {\r\n    setFailureModal({ visible: true, deliveryId });\r\n    setFailureReason('');\r\n  };\r\n\r\n  const submitFailure = () => {\r\n    if (!failureReason.trim()) {\r\n      alert('Please enter a failure reason');\r\n      return;\r\n    }\r\n    handleStatusUpdate(failureModal.deliveryId, 'failed', failureReason);\r\n    setFailureModal({ visible: false, deliveryId: null });\r\n    setFailureReason('');\r\n  };\r\n\r\n  // Proof modal helpers: require proof before marking delivered\r\n  const openProofModal = (deliveryId) => {\r\n    setProofModal({ visible: true, deliveryId });\r\n    setUploadedProof(null);\r\n    setUseCamera(false);\r\n  };\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        setUseCamera(true);\r\n      }\r\n    } catch (error) {\r\n      alert('Could not access camera: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const capturePhoto = () => {\r\n    if (videoRef.current && canvasRef.current) {\r\n      const context = canvasRef.current.getContext('2d');\r\n      canvasRef.current.width = videoRef.current.videoWidth || 640;\r\n      canvasRef.current.height = videoRef.current.videoHeight || 480;\r\n      context.drawImage(videoRef.current, 0, 0, canvasRef.current.width, canvasRef.current.height);\r\n      const imageData = canvasRef.current.toDataURL('image/jpeg');\r\n      setUploadedProof(imageData);\r\n      setUseCamera(false);\r\n      if (videoRef.current.srcObject) {\r\n        videoRef.current.srcObject.getTracks().forEach(track => track.stop());\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleProofFile = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => setUploadedProof(event.target.result);\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleUploadProof = async () => {\r\n    if (!proofModal.deliveryId || !uploadedProof) {\r\n      alert('Please capture or upload a photo first');\r\n      return;\r\n    }\r\n    try {\r\n      await api.post(`/messenger/deliveries/${proofModal.deliveryId}/proof`, { imageData: uploadedProof });\r\n      alert('Proof uploaded and delivery marked as delivered');\r\n      setProofModal({ visible: false, deliveryId: null });\r\n      setUploadedProof(null);\r\n      fetchRoutes();\r\n    } catch (error) {\r\n      console.error('Error uploading proof:', error);\r\n      alert('Error uploading proof');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading your routes...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"messenger-container\">\r\n      <div className=\"page-header\">\r\n        <h1>My Routes & Tasks</h1>\r\n        <p>Track your daily deliveries and update status</p>\r\n      </div>\r\n\r\n      {stats && (\r\n        <div className=\"stats-grid\">\r\n          <div className=\"stat-box\">\r\n            <div className=\"stat-number\">{stats.total}</div>\r\n            <div className=\"stat-label\">Total Tasks</div>\r\n          </div>\r\n          <div className=\"stat-box success\">\r\n            <div className=\"stat-number\">{stats.delivered}</div>\r\n            <div className=\"stat-label\">Delivered</div>\r\n          </div>\r\n          <div className=\"stat-box warning\">\r\n            <div className=\"stat-number\">{stats.pending}</div>\r\n            <div className=\"stat-label\">Pending</div>\r\n          </div>\r\n          <div className=\"stat-box danger\">\r\n            <div className=\"stat-number\">{stats.failed}</div>\r\n            <div className=\"stat-label\">Failed</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"filter-section\">\r\n        <button \r\n          className={`filter-btn ${filter === 'all' ? 'active' : ''}`}\r\n          onClick={() => setFilter('all')}\r\n        >\r\n          All\r\n        </button>\r\n        <button \r\n          className={`filter-btn ${filter === 'pending' ? 'active' : ''}`}\r\n          onClick={() => setFilter('pending')}\r\n        >\r\n          Pending\r\n        </button>\r\n        <button \r\n          className={`filter-btn ${filter === 'delivered' ? 'active' : ''}`}\r\n          onClick={() => setFilter('delivered')}\r\n        >\r\n          Delivered\r\n        </button>\r\n        <button \r\n          className={`filter-btn ${filter === 'failed' ? 'active' : ''}`}\r\n          onClick={() => setFilter('failed')}\r\n        >\r\n          Failed\r\n        </button>\r\n      </div>\r\n\r\n      {/* Delivery Sequence (FR-M04: optimized sequence shown in order) */}\r\n      <div className=\"sequence-note\">\r\n        Deliveries are optimized by status and address sequence\r\n      </div>\r\n\r\n      <div className=\"deliveries-list\">\r\n        {filteredDeliveries.map((delivery) => (\r\n          <div key={delivery._id} className=\"delivery-card\">\r\n            <div className=\"delivery-header\">\r\n              <div>\r\n                <h3>{delivery.billId?.customerName || 'Unknown Customer'}</h3>\r\n                <p className=\"delivery-account\">Account: {delivery.billId?.accountNumber}</p>\r\n              </div>\r\n              <span className={`status-badge status-${delivery.status}`}>\r\n                {delivery.status.toUpperCase()}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"delivery-details\">\r\n              <div className=\"detail-row\">\r\n                <span className=\"label\">Address:</span>\r\n                <span className=\"value\">{delivery.billId?.address}</span>\r\n              </div>\r\n              <div className=\"detail-row\">\r\n                <span className=\"label\">Route:</span>\r\n                <span className=\"value\">{delivery.billId?.route}</span>\r\n              </div>\r\n              <div className=\"detail-row\">\r\n                <span className=\"label\">ðŸ“„ Bill Type:</span>\r\n                <span className=\"value\">{delivery.billId?.billType === 'disconnection_notice' ? 'Disconnection Notice' : 'Regular Bill'}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"delivery-actions\">\r\n              {delivery.status === 'pending' || delivery.status === 'assigned' ? (\r\n                <>\r\n                  <button \r\n                    className=\"action-btn success\"\r\n                    onClick={() => openProofModal(delivery._id)}\r\n                  >\r\n                    Mark Delivered\r\n                  </button>\r\n                  <button \r\n                    className=\"action-btn warning\"\r\n                    onClick={() => openFailureModal(delivery._id)}\r\n                  >\r\n                    Mark Failed\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <span className=\"completed-badge\">\r\n                  {delivery.status === 'delivered' ? 'Completed' : 'Failed'}\r\n                </span>\r\n              )}\r\n            </div>\r\n            {delivery.failureReason && (\r\n              <div className=\"delivery-failure-reason\">\r\n                <strong>Reason:</strong> {delivery.failureReason}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {filteredDeliveries.length === 0 && (\r\n        <div className=\"empty-state\">\r\n          <p>No {filter !== 'all' ? filter : ''} deliveries at the moment.</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Proof Upload Modal (require proof before marking delivered) */}\r\n      {proofModal.visible && (\r\n        <div className=\"modal-overlay\" onClick={() => setProofModal({ visible: false, deliveryId: null })}>\r\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n            <h2>Upload Proof of Delivery</h2>\r\n            <p>Capture or upload photo evidence before marking delivered.</p>\r\n\r\n            <div className=\"upload-options\">\r\n              <button className=\"upload-btn camera\" onClick={startCamera}>Use Camera</button>\r\n              <button className=\"upload-btn gallery\" onClick={() => fileInputRef.current?.click()}>Upload from Gallery</button>\r\n            </div>\r\n\r\n            <input type=\"file\" ref={fileInputRef} accept=\"image/*\" style={{ display: 'none' }} onChange={handleProofFile} />\r\n\r\n            {useCamera && (\r\n              <div className=\"camera-section\">\r\n                <video ref={videoRef} autoPlay playsInline></video>\r\n                <canvas ref={canvasRef} style={{ display: 'none' }}></canvas>\r\n                <button className=\"capture-btn\" onClick={capturePhoto}>ðŸ“¸ Capture</button>\r\n              </div>\r\n            )}\r\n\r\n            {uploadedProof && (\r\n              <div className=\"image-preview\">\r\n                <img src={uploadedProof} alt=\"Proof\" />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"modal-buttons\">\r\n              <button className=\"btn btn-secondary\" onClick={() => setProofModal({ visible: false, deliveryId: null })}>Cancel</button>\r\n              <button className=\"btn btn-danger\" onClick={handleUploadProof}>Upload & Mark Delivered</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Failure Reason Modal (FR-M07: require reason for failed delivery) */}\r\n      {failureModal.visible && (\r\n        <div className=\"modal-overlay\" onClick={() => setFailureModal({ visible: false, deliveryId: null })}>\r\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n            <h2>Mark Delivery as Failed</h2>\r\n            <p>Please provide the reason for failure:</p>\r\n            <textarea\r\n              value={failureReason}\r\n              onChange={(e) => setFailureReason(e.target.value)}\r\n              placeholder=\"Enter reason (e.g., Customer not home, Address not found, etc.)\"\r\n              className=\"failure-textarea\"\r\n            />\r\n            <div className=\"modal-buttons\">\r\n              <button \r\n                className=\"btn btn-secondary\"\r\n                onClick={() => setFailureModal({ visible: false, deliveryId: null })}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button \r\n                className=\"btn btn-danger\"\r\n                onClick={submitFailure}\r\n              >\r\n                Confirm Failed\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessengerRoutes;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}