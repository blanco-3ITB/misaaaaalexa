{"ast":null,"code":"var _jsxFileName = \"C:\\\\pod system\\\\frontend\\\\src\\\\pages\\\\MessengerRoutes.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport api from '../utils/api';\nimport './Messenger.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MessengerRoutes = () => {\n  _s();\n  const [deliveries, setDeliveries] = useState([]);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [failureModal, setFailureModal] = useState({\n    visible: false,\n    deliveryId: null\n  });\n  const [failureReason, setFailureReason] = useState('');\n  const [assignedRoute, setAssignedRoute] = useState(null);\n  // Proof capture refs/state\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const [useCamera, setUseCamera] = useState(false);\n  const [uploadedProof, setUploadedProof] = useState(null);\n  const [proofModal, setProofModal] = useState({\n    visible: false,\n    deliveryId: null\n  });\n  useEffect(() => {\n    fetchRoutes();\n    // Auto-refresh every 30 seconds (FR-M12: route update notifications)\n    const interval = setInterval(fetchRoutes, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  const fetchRoutes = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/messenger/routes');\n      const rawDeliveries = response.data.deliveries;\n\n      // Extract route info (FR-M03: assigned route for the day)\n      const routes = [...new Set(rawDeliveries.map(d => {\n        var _d$billId;\n        return (_d$billId = d.billId) === null || _d$billId === void 0 ? void 0 : _d$billId.route;\n      }).filter(Boolean))];\n      setAssignedRoute(routes.length === 1 ? routes[0] : `Multiple Routes (${routes.length})`);\n\n      // Sort by sequence/address for optimization (FR-M04: optimized delivery sequence)\n      const optimizedDeliveries = sortDeliveries(rawDeliveries);\n      setDeliveries(optimizedDeliveries);\n      setStats(response.data.stats);\n    } catch (error) {\n      console.error('Error fetching routes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Simple optimization: group by route, then sort by pending status first, then address\n  const sortDeliveries = items => {\n    return items.sort((a, b) => {\n      var _a$billId, _b$billId;\n      const statusOrder = {\n        pending: 0,\n        assigned: 1,\n        delivered: 2,\n        failed: 3\n      };\n      const statusDiff = (statusOrder[a.status] || 0) - (statusOrder[b.status] || 0);\n      if (statusDiff !== 0) return statusDiff;\n      const addrA = ((_a$billId = a.billId) === null || _a$billId === void 0 ? void 0 : _a$billId.address) || '';\n      const addrB = ((_b$billId = b.billId) === null || _b$billId === void 0 ? void 0 : _b$billId.address) || '';\n      return addrA.localeCompare(addrB);\n    });\n  };\n  const filteredDeliveries = filter === 'all' ? deliveries : deliveries.filter(d => d.status === filter);\n  const handleStatusUpdate = async (deliveryId, newStatus, reason = '') => {\n    try {\n      await api.put(`/messenger/deliveries/${deliveryId}/status`, {\n        status: newStatus,\n        failureReason: reason,\n        notes: reason\n      });\n      fetchRoutes();\n    } catch (error) {\n      console.error('Error updating status:', error);\n      alert('Error updating delivery status');\n    }\n  };\n  const openFailureModal = deliveryId => {\n    setFailureModal({\n      visible: true,\n      deliveryId\n    });\n    setFailureReason('');\n  };\n  const submitFailure = () => {\n    if (!failureReason.trim()) {\n      alert('Please enter a failure reason');\n      return;\n    }\n    handleStatusUpdate(failureModal.deliveryId, 'failed', failureReason);\n    setFailureModal({\n      visible: false,\n      deliveryId: null\n    });\n    setFailureReason('');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading your routes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"messenger-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Routes & Tasks\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Track your daily deliveries and update status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), assignedRoute && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"route-summary-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"route-label\",\n        children: \"Assigned Route:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"route-value\",\n        children: assignedRoute\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"refresh-btn\",\n        onClick: fetchRoutes,\n        title: \"Refresh for updates\",\n        children: \"\\u21BB Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), stats && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Total Tasks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box success\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.delivered\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Delivered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box warning\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.pending\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Pending\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-box danger\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-number\",\n          children: stats.failed\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-label\",\n          children: \"Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'all' ? 'active' : ''}`,\n        onClick: () => setFilter('all'),\n        children: \"All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'pending' ? 'active' : ''}`,\n        onClick: () => setFilter('pending'),\n        children: \"Pending\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'delivered' ? 'active' : ''}`,\n        onClick: () => setFilter('delivered'),\n        children: \"Delivered\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `filter-btn ${filter === 'failed' ? 'active' : ''}`,\n        onClick: () => setFilter('failed'),\n        children: \"Failed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sequence-note\",\n      children: \"Deliveries are optimized by status and address sequence\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"deliveries-list\",\n      children: filteredDeliveries.map(delivery => {\n        var _delivery$billId, _delivery$billId2, _delivery$billId3, _delivery$billId4, _delivery$billId5;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delivery-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: ((_delivery$billId = delivery.billId) === null || _delivery$billId === void 0 ? void 0 : _delivery$billId.customerName) || 'Unknown Customer'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"delivery-account\",\n                children: [\"Account: \", (_delivery$billId2 = delivery.billId) === null || _delivery$billId2 === void 0 ? void 0 : _delivery$billId2.accountNumber]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status-badge status-${delivery.status}`,\n              children: delivery.status.toUpperCase()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value\",\n                children: (_delivery$billId3 = delivery.billId) === null || _delivery$billId3 === void 0 ? void 0 : _delivery$billId3.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"Route:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value\",\n                children: (_delivery$billId4 = delivery.billId) === null || _delivery$billId4 === void 0 ? void 0 : _delivery$billId4.route\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"label\",\n                children: \"\\uD83D\\uDCC4 Bill Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"value\",\n                children: ((_delivery$billId5 = delivery.billId) === null || _delivery$billId5 === void 0 ? void 0 : _delivery$billId5.billType) === 'disconnection_notice' ? 'Disconnection Notice' : 'Regular Bill'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-actions\",\n            children: delivery.status === 'pending' || delivery.status === 'assigned' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-btn success\",\n                onClick: () => handleStatusUpdate(delivery._id, 'delivered'),\n                children: \"Mark Delivered\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"action-btn warning\",\n                onClick: () => openFailureModal(delivery._id),\n                children: \"Mark Failed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"completed-badge\",\n              children: delivery.status === 'delivered' ? 'Completed' : 'Failed'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), delivery.failureReason && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delivery-failure-reason\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Reason:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this), \" \", delivery.failureReason]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this)]\n        }, delivery._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), filteredDeliveries.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-state\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"No \", filter !== 'all' ? filter : '', \" deliveries at the moment.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this), failureModal.visible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setFailureModal({\n        visible: false,\n        deliveryId: null\n      }),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Mark Delivery as Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please provide the reason for failure:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: failureReason,\n          onChange: e => setFailureReason(e.target.value),\n          placeholder: \"Enter reason (e.g., Customer not home, Address not found, etc.)\",\n          className: \"failure-textarea\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => setFailureModal({\n              visible: false,\n              deliveryId: null\n            }),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: submitFailure,\n            children: \"Confirm Failed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n};\n_s(MessengerRoutes, \"wjh0LvSsrEzlbiWgPcDqbbkzblM=\");\n_c = MessengerRoutes;\nexport default MessengerRoutes;\nvar _c;\n$RefreshReg$(_c, \"MessengerRoutes\");","map":{"version":3,"names":["React","useState","useEffect","useRef","api","jsxDEV","_jsxDEV","Fragment","_Fragment","MessengerRoutes","_s","deliveries","setDeliveries","stats","setStats","loading","setLoading","filter","setFilter","failureModal","setFailureModal","visible","deliveryId","failureReason","setFailureReason","assignedRoute","setAssignedRoute","videoRef","canvasRef","fileInputRef","useCamera","setUseCamera","uploadedProof","setUploadedProof","proofModal","setProofModal","fetchRoutes","interval","setInterval","clearInterval","response","get","rawDeliveries","data","routes","Set","map","d","_d$billId","billId","route","Boolean","length","optimizedDeliveries","sortDeliveries","error","console","items","sort","a","b","_a$billId","_b$billId","statusOrder","pending","assigned","delivered","failed","statusDiff","status","addrA","address","addrB","localeCompare","filteredDeliveries","handleStatusUpdate","newStatus","reason","put","notes","alert","openFailureModal","submitFailure","trim","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","total","delivery","_delivery$billId","_delivery$billId2","_delivery$billId3","_delivery$billId4","_delivery$billId5","customerName","accountNumber","toUpperCase","billType","_id","e","stopPropagation","value","onChange","target","placeholder","_c","$RefreshReg$"],"sources":["C:/pod system/frontend/src/pages/MessengerRoutes.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport api from '../utils/api';\r\nimport './Messenger.css';\r\n\r\nconst MessengerRoutes = () => {\r\n  const [deliveries, setDeliveries] = useState([]);\r\n  const [stats, setStats] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all');\r\n  const [failureModal, setFailureModal] = useState({ visible: false, deliveryId: null });\r\n  const [failureReason, setFailureReason] = useState('');\r\n  const [assignedRoute, setAssignedRoute] = useState(null);\r\n  // Proof capture refs/state\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n  const [useCamera, setUseCamera] = useState(false);\r\n  const [uploadedProof, setUploadedProof] = useState(null);\r\n  const [proofModal, setProofModal] = useState({ visible: false, deliveryId: null });\r\n\r\n  useEffect(() => {\r\n    fetchRoutes();\r\n    // Auto-refresh every 30 seconds (FR-M12: route update notifications)\r\n    const interval = setInterval(fetchRoutes, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchRoutes = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get('/messenger/routes');\r\n      const rawDeliveries = response.data.deliveries;\r\n      \r\n      // Extract route info (FR-M03: assigned route for the day)\r\n      const routes = [...new Set(rawDeliveries.map(d => d.billId?.route).filter(Boolean))];\r\n      setAssignedRoute(routes.length === 1 ? routes[0] : `Multiple Routes (${routes.length})`);\r\n      \r\n      // Sort by sequence/address for optimization (FR-M04: optimized delivery sequence)\r\n      const optimizedDeliveries = sortDeliveries(rawDeliveries);\r\n      setDeliveries(optimizedDeliveries);\r\n      setStats(response.data.stats);\r\n    } catch (error) {\r\n      console.error('Error fetching routes:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Simple optimization: group by route, then sort by pending status first, then address\r\n  const sortDeliveries = (items) => {\r\n    return items.sort((a, b) => {\r\n      const statusOrder = { pending: 0, assigned: 1, delivered: 2, failed: 3 };\r\n      const statusDiff = (statusOrder[a.status] || 0) - (statusOrder[b.status] || 0);\r\n      if (statusDiff !== 0) return statusDiff;\r\n      \r\n      const addrA = a.billId?.address || '';\r\n      const addrB = b.billId?.address || '';\r\n      return addrA.localeCompare(addrB);\r\n    });\r\n  };\r\n\r\n  const filteredDeliveries = filter === 'all' \r\n    ? deliveries \r\n    : deliveries.filter(d => d.status === filter);\r\n\r\n  const handleStatusUpdate = async (deliveryId, newStatus, reason = '') => {\r\n    try {\r\n      await api.put(`/messenger/deliveries/${deliveryId}/status`, {\r\n        status: newStatus,\r\n        failureReason: reason,\r\n        notes: reason,\r\n      });\r\n      fetchRoutes();\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n      alert('Error updating delivery status');\r\n    }\r\n  };\r\n\r\n  const openFailureModal = (deliveryId) => {\r\n    setFailureModal({ visible: true, deliveryId });\r\n    setFailureReason('');\r\n  };\r\n\r\n  const submitFailure = () => {\r\n    if (!failureReason.trim()) {\r\n      alert('Please enter a failure reason');\r\n      return;\r\n    }\r\n    handleStatusUpdate(failureModal.deliveryId, 'failed', failureReason);\r\n    setFailureModal({ visible: false, deliveryId: null });\r\n    setFailureReason('');\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Loading your routes...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"messenger-container\">\r\n      <div className=\"page-header\">\r\n        <h1>My Routes & Tasks</h1>\r\n        <p>Track your daily deliveries and update status</p>\r\n      </div>\r\n\r\n      {/* Route Summary (FR-M03) */}\r\n      {assignedRoute && (\r\n        <div className=\"route-summary-box\">\r\n          <div className=\"route-label\">Assigned Route:</div>\r\n          <div className=\"route-value\">{assignedRoute}</div>\r\n          <button className=\"refresh-btn\" onClick={fetchRoutes} title=\"Refresh for updates\">\r\n            â†» Refresh\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {stats && (\r\n        <div className=\"stats-grid\">\r\n          <div className=\"stat-box\">\r\n            <div className=\"stat-number\">{stats.total}</div>\r\n            <div className=\"stat-label\">Total Tasks</div>\r\n          </div>\r\n          <div className=\"stat-box success\">\r\n            <div className=\"stat-number\">{stats.delivered}</div>\r\n            <div className=\"stat-label\">Delivered</div>\r\n          </div>\r\n          <div className=\"stat-box warning\">\r\n            <div className=\"stat-number\">{stats.pending}</div>\r\n            <div className=\"stat-label\">Pending</div>\r\n          </div>\r\n          <div className=\"stat-box danger\">\r\n            <div className=\"stat-number\">{stats.failed}</div>\r\n            <div className=\"stat-label\">Failed</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"filter-section\">\r\n        <button \r\n          className={`filter-btn ${filter === 'all' ? 'active' : ''}`}\r\n          onClick={() => setFilter('all')}\r\n        >\r\n          All\r\n        </button>\r\n        <button \r\n          className={`filter-btn ${filter === 'pending' ? 'active' : ''}`}\r\n          onClick={() => setFilter('pending')}\r\n        >\r\n          Pending\r\n        </button>\r\n        <button \r\n          className={`filter-btn ${filter === 'delivered' ? 'active' : ''}`}\r\n          onClick={() => setFilter('delivered')}\r\n        >\r\n          Delivered\r\n        </button>\r\n        <button \r\n          className={`filter-btn ${filter === 'failed' ? 'active' : ''}`}\r\n          onClick={() => setFilter('failed')}\r\n        >\r\n          Failed\r\n        </button>\r\n      </div>\r\n\r\n      {/* Delivery Sequence (FR-M04: optimized sequence shown in order) */}\r\n      <div className=\"sequence-note\">\r\n        Deliveries are optimized by status and address sequence\r\n      </div>\r\n\r\n      <div className=\"deliveries-list\">\r\n        {filteredDeliveries.map((delivery) => (\r\n          <div key={delivery._id} className=\"delivery-card\">\r\n            <div className=\"delivery-header\">\r\n              <div>\r\n                <h3>{delivery.billId?.customerName || 'Unknown Customer'}</h3>\r\n                <p className=\"delivery-account\">Account: {delivery.billId?.accountNumber}</p>\r\n              </div>\r\n              <span className={`status-badge status-${delivery.status}`}>\r\n                {delivery.status.toUpperCase()}\r\n              </span>\r\n            </div>\r\n\r\n            <div className=\"delivery-details\">\r\n              <div className=\"detail-row\">\r\n                <span className=\"label\">Address:</span>\r\n                <span className=\"value\">{delivery.billId?.address}</span>\r\n              </div>\r\n              <div className=\"detail-row\">\r\n                <span className=\"label\">Route:</span>\r\n                <span className=\"value\">{delivery.billId?.route}</span>\r\n              </div>\r\n              <div className=\"detail-row\">\r\n                <span className=\"label\">ðŸ“„ Bill Type:</span>\r\n                <span className=\"value\">{delivery.billId?.billType === 'disconnection_notice' ? 'Disconnection Notice' : 'Regular Bill'}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"delivery-actions\">\r\n              {delivery.status === 'pending' || delivery.status === 'assigned' ? (\r\n                <>\r\n                  <button \r\n                    className=\"action-btn success\"\r\n                    onClick={() => handleStatusUpdate(delivery._id, 'delivered')}\r\n                  >\r\n                    Mark Delivered\r\n                  </button>\r\n                  <button \r\n                    className=\"action-btn warning\"\r\n                    onClick={() => openFailureModal(delivery._id)}\r\n                  >\r\n                    Mark Failed\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <span className=\"completed-badge\">\r\n                  {delivery.status === 'delivered' ? 'Completed' : 'Failed'}\r\n                </span>\r\n              )}\r\n            </div>\r\n            {delivery.failureReason && (\r\n              <div className=\"delivery-failure-reason\">\r\n                <strong>Reason:</strong> {delivery.failureReason}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {filteredDeliveries.length === 0 && (\r\n        <div className=\"empty-state\">\r\n          <p>No {filter !== 'all' ? filter : ''} deliveries at the moment.</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Failure Reason Modal (FR-M07: require reason for failed delivery) */}\r\n      {failureModal.visible && (\r\n        <div className=\"modal-overlay\" onClick={() => setFailureModal({ visible: false, deliveryId: null })}>\r\n          <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n            <h2>Mark Delivery as Failed</h2>\r\n            <p>Please provide the reason for failure:</p>\r\n            <textarea\r\n              value={failureReason}\r\n              onChange={(e) => setFailureReason(e.target.value)}\r\n              placeholder=\"Enter reason (e.g., Customer not home, Address not found, etc.)\"\r\n              className=\"failure-textarea\"\r\n            />\r\n            <div className=\"modal-buttons\">\r\n              <button \r\n                className=\"btn btn-secondary\"\r\n                onClick={() => setFailureModal({ visible: false, deliveryId: null })}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button \r\n                className=\"btn btn-danger\"\r\n                onClick={submitFailure}\r\n              >\r\n                Confirm Failed\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessengerRoutes;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAOC,GAAG,MAAM,cAAc;AAC9B,OAAO,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEzB,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACgB,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACkB,YAAY,EAAEC,eAAe,CAAC,GAAGnB,QAAQ,CAAC;IAAEoB,OAAO,EAAE,KAAK;IAAEC,UAAU,EAAE;EAAK,CAAC,CAAC;EACtF,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACwB,aAAa,EAAEC,gBAAgB,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EACxD;EACA,MAAM0B,QAAQ,GAAGxB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMyB,SAAS,GAAGzB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM0B,YAAY,GAAG1B,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM,CAAC2B,SAAS,EAAEC,YAAY,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC+B,aAAa,EAAEC,gBAAgB,CAAC,GAAGhC,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACiC,UAAU,EAAEC,aAAa,CAAC,GAAGlC,QAAQ,CAAC;IAAEoB,OAAO,EAAE,KAAK;IAAEC,UAAU,EAAE;EAAK,CAAC,CAAC;EAElFpB,SAAS,CAAC,MAAM;IACdkC,WAAW,CAAC,CAAC;IACb;IACA,MAAMC,QAAQ,GAAGC,WAAW,CAACF,WAAW,EAAE,KAAK,CAAC;IAChD,OAAO,MAAMG,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMD,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACFpB,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMwB,QAAQ,GAAG,MAAMpC,GAAG,CAACqC,GAAG,CAAC,mBAAmB,CAAC;MACnD,MAAMC,aAAa,GAAGF,QAAQ,CAACG,IAAI,CAAChC,UAAU;;MAE9C;MACA,MAAMiC,MAAM,GAAG,CAAC,GAAG,IAAIC,GAAG,CAACH,aAAa,CAACI,GAAG,CAACC,CAAC;QAAA,IAAAC,SAAA;QAAA,QAAAA,SAAA,GAAID,CAAC,CAACE,MAAM,cAAAD,SAAA,uBAARA,SAAA,CAAUE,KAAK;MAAA,EAAC,CAACjC,MAAM,CAACkC,OAAO,CAAC,CAAC,CAAC;MACpFzB,gBAAgB,CAACkB,MAAM,CAACQ,MAAM,KAAK,CAAC,GAAGR,MAAM,CAAC,CAAC,CAAC,GAAG,oBAAoBA,MAAM,CAACQ,MAAM,GAAG,CAAC;;MAExF;MACA,MAAMC,mBAAmB,GAAGC,cAAc,CAACZ,aAAa,CAAC;MACzD9B,aAAa,CAACyC,mBAAmB,CAAC;MAClCvC,QAAQ,CAAC0B,QAAQ,CAACG,IAAI,CAAC9B,KAAK,CAAC;IAC/B,CAAC,CAAC,OAAO0C,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAChD,CAAC,SAAS;MACRvC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMsC,cAAc,GAAIG,KAAK,IAAK;IAChC,OAAOA,KAAK,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAAA,IAAAC,SAAA,EAAAC,SAAA;MAC1B,MAAMC,WAAW,GAAG;QAAEC,OAAO,EAAE,CAAC;QAAEC,QAAQ,EAAE,CAAC;QAAEC,SAAS,EAAE,CAAC;QAAEC,MAAM,EAAE;MAAE,CAAC;MACxE,MAAMC,UAAU,GAAG,CAACL,WAAW,CAACJ,CAAC,CAACU,MAAM,CAAC,IAAI,CAAC,KAAKN,WAAW,CAACH,CAAC,CAACS,MAAM,CAAC,IAAI,CAAC,CAAC;MAC9E,IAAID,UAAU,KAAK,CAAC,EAAE,OAAOA,UAAU;MAEvC,MAAME,KAAK,GAAG,EAAAT,SAAA,GAAAF,CAAC,CAACV,MAAM,cAAAY,SAAA,uBAARA,SAAA,CAAUU,OAAO,KAAI,EAAE;MACrC,MAAMC,KAAK,GAAG,EAAAV,SAAA,GAAAF,CAAC,CAACX,MAAM,cAAAa,SAAA,uBAARA,SAAA,CAAUS,OAAO,KAAI,EAAE;MACrC,OAAOD,KAAK,CAACG,aAAa,CAACD,KAAK,CAAC;IACnC,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,kBAAkB,GAAGzD,MAAM,KAAK,KAAK,GACvCN,UAAU,GACVA,UAAU,CAACM,MAAM,CAAC8B,CAAC,IAAIA,CAAC,CAACsB,MAAM,KAAKpD,MAAM,CAAC;EAE/C,MAAM0D,kBAAkB,GAAG,MAAAA,CAAOrD,UAAU,EAAEsD,SAAS,EAAEC,MAAM,GAAG,EAAE,KAAK;IACvE,IAAI;MACF,MAAMzE,GAAG,CAAC0E,GAAG,CAAC,yBAAyBxD,UAAU,SAAS,EAAE;QAC1D+C,MAAM,EAAEO,SAAS;QACjBrD,aAAa,EAAEsD,MAAM;QACrBE,KAAK,EAAEF;MACT,CAAC,CAAC;MACFzC,WAAW,CAAC,CAAC;IACf,CAAC,CAAC,OAAOmB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CyB,KAAK,CAAC,gCAAgC,CAAC;IACzC;EACF,CAAC;EAED,MAAMC,gBAAgB,GAAI3D,UAAU,IAAK;IACvCF,eAAe,CAAC;MAAEC,OAAO,EAAE,IAAI;MAAEC;IAAW,CAAC,CAAC;IAC9CE,gBAAgB,CAAC,EAAE,CAAC;EACtB,CAAC;EAED,MAAM0D,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,CAAC3D,aAAa,CAAC4D,IAAI,CAAC,CAAC,EAAE;MACzBH,KAAK,CAAC,+BAA+B,CAAC;MACtC;IACF;IACAL,kBAAkB,CAACxD,YAAY,CAACG,UAAU,EAAE,QAAQ,EAAEC,aAAa,CAAC;IACpEH,eAAe,CAAC;MAAEC,OAAO,EAAE,KAAK;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;IACrDE,gBAAgB,CAAC,EAAE,CAAC;EACtB,CAAC;EAED,IAAIT,OAAO,EAAE;IACX,oBAAOT,OAAA;MAAK8E,SAAS,EAAC,SAAS;MAAAC,QAAA,EAAC;IAAsB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC9D;EAEA,oBACEnF,OAAA;IAAK8E,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAClC/E,OAAA;MAAK8E,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1B/E,OAAA;QAAA+E,QAAA,EAAI;MAAiB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1BnF,OAAA;QAAA+E,QAAA,EAAG;MAA6C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjD,CAAC,EAGLhE,aAAa,iBACZnB,OAAA;MAAK8E,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChC/E,OAAA;QAAK8E,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAC;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAClDnF,OAAA;QAAK8E,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAE5D;MAAa;QAAA6D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAClDnF,OAAA;QAAQ8E,SAAS,EAAC,aAAa;QAACM,OAAO,EAAEtD,WAAY;QAACuD,KAAK,EAAC,qBAAqB;QAAAN,QAAA,EAAC;MAElF;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,EAEA5E,KAAK,iBACJP,OAAA;MAAK8E,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzB/E,OAAA;QAAK8E,SAAS,EAAC,UAAU;QAAAC,QAAA,gBACvB/E,OAAA;UAAK8E,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAExE,KAAK,CAAC+E;QAAK;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAChDnF,OAAA;UAAK8E,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC,eACNnF,OAAA;QAAK8E,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC/B/E,OAAA;UAAK8E,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAExE,KAAK,CAACqD;QAAS;UAAAoB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACpDnF,OAAA;UAAK8E,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC,eACNnF,OAAA;QAAK8E,SAAS,EAAC,kBAAkB;QAAAC,QAAA,gBAC/B/E,OAAA;UAAK8E,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAExE,KAAK,CAACmD;QAAO;UAAAsB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAClDnF,OAAA;UAAK8E,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC,CAAC,eACNnF,OAAA;QAAK8E,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9B/E,OAAA;UAAK8E,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAExE,KAAK,CAACsD;QAAM;UAAAmB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACjDnF,OAAA;UAAK8E,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAEDnF,OAAA;MAAK8E,SAAS,EAAC,gBAAgB;MAAAC,QAAA,gBAC7B/E,OAAA;QACE8E,SAAS,EAAE,cAAcnE,MAAM,KAAK,KAAK,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC5DyE,OAAO,EAAEA,CAAA,KAAMxE,SAAS,CAAC,KAAK,CAAE;QAAAmE,QAAA,EACjC;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTnF,OAAA;QACE8E,SAAS,EAAE,cAAcnE,MAAM,KAAK,SAAS,GAAG,QAAQ,GAAG,EAAE,EAAG;QAChEyE,OAAO,EAAEA,CAAA,KAAMxE,SAAS,CAAC,SAAS,CAAE;QAAAmE,QAAA,EACrC;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTnF,OAAA;QACE8E,SAAS,EAAE,cAAcnE,MAAM,KAAK,WAAW,GAAG,QAAQ,GAAG,EAAE,EAAG;QAClEyE,OAAO,EAAEA,CAAA,KAAMxE,SAAS,CAAC,WAAW,CAAE;QAAAmE,QAAA,EACvC;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTnF,OAAA;QACE8E,SAAS,EAAE,cAAcnE,MAAM,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC/DyE,OAAO,EAAEA,CAAA,KAAMxE,SAAS,CAAC,QAAQ,CAAE;QAAAmE,QAAA,EACpC;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGNnF,OAAA;MAAK8E,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAC;IAE/B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAENnF,OAAA;MAAK8E,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAC7BX,kBAAkB,CAAC5B,GAAG,CAAE+C,QAAQ;QAAA,IAAAC,gBAAA,EAAAC,iBAAA,EAAAC,iBAAA,EAAAC,iBAAA,EAAAC,iBAAA;QAAA,oBAC/B5F,OAAA;UAAwB8E,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC/C/E,OAAA;YAAK8E,SAAS,EAAC,iBAAiB;YAAAC,QAAA,gBAC9B/E,OAAA;cAAA+E,QAAA,gBACE/E,OAAA;gBAAA+E,QAAA,EAAK,EAAAS,gBAAA,GAAAD,QAAQ,CAAC5C,MAAM,cAAA6C,gBAAA,uBAAfA,gBAAA,CAAiBK,YAAY,KAAI;cAAkB;gBAAAb,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAC9DnF,OAAA;gBAAG8E,SAAS,EAAC,kBAAkB;gBAAAC,QAAA,GAAC,WAAS,GAAAU,iBAAA,GAACF,QAAQ,CAAC5C,MAAM,cAAA8C,iBAAA,uBAAfA,iBAAA,CAAiBK,aAAa;cAAA;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1E,CAAC,eACNnF,OAAA;cAAM8E,SAAS,EAAE,uBAAuBS,QAAQ,CAACxB,MAAM,EAAG;cAAAgB,QAAA,EACvDQ,QAAQ,CAACxB,MAAM,CAACgC,WAAW,CAAC;YAAC;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAENnF,OAAA;YAAK8E,SAAS,EAAC,kBAAkB;YAAAC,QAAA,gBAC/B/E,OAAA;cAAK8E,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzB/E,OAAA;gBAAM8E,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACvCnF,OAAA;gBAAM8E,SAAS,EAAC,OAAO;gBAAAC,QAAA,GAAAW,iBAAA,GAAEH,QAAQ,CAAC5C,MAAM,cAAA+C,iBAAA,uBAAfA,iBAAA,CAAiBzB;cAAO;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtD,CAAC,eACNnF,OAAA;cAAK8E,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzB/E,OAAA;gBAAM8E,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eACrCnF,OAAA;gBAAM8E,SAAS,EAAC,OAAO;gBAAAC,QAAA,GAAAY,iBAAA,GAAEJ,QAAQ,CAAC5C,MAAM,cAAAgD,iBAAA,uBAAfA,iBAAA,CAAiB/C;cAAK;gBAAAoC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpD,CAAC,eACNnF,OAAA;cAAK8E,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzB/E,OAAA;gBAAM8E,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAC;cAAa;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC5CnF,OAAA;gBAAM8E,SAAS,EAAC,OAAO;gBAAAC,QAAA,EAAE,EAAAa,iBAAA,GAAAL,QAAQ,CAAC5C,MAAM,cAAAiD,iBAAA,uBAAfA,iBAAA,CAAiBI,QAAQ,MAAK,sBAAsB,GAAG,sBAAsB,GAAG;cAAc;gBAAAhB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5H,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENnF,OAAA;YAAK8E,SAAS,EAAC,kBAAkB;YAAAC,QAAA,EAC9BQ,QAAQ,CAACxB,MAAM,KAAK,SAAS,IAAIwB,QAAQ,CAACxB,MAAM,KAAK,UAAU,gBAC9D/D,OAAA,CAAAE,SAAA;cAAA6E,QAAA,gBACE/E,OAAA;gBACE8E,SAAS,EAAC,oBAAoB;gBAC9BM,OAAO,EAAEA,CAAA,KAAMf,kBAAkB,CAACkB,QAAQ,CAACU,GAAG,EAAE,WAAW,CAAE;gBAAAlB,QAAA,EAC9D;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTnF,OAAA;gBACE8E,SAAS,EAAC,oBAAoB;gBAC9BM,OAAO,EAAEA,CAAA,KAAMT,gBAAgB,CAACY,QAAQ,CAACU,GAAG,CAAE;gBAAAlB,QAAA,EAC/C;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA,eACT,CAAC,gBAEHnF,OAAA;cAAM8E,SAAS,EAAC,iBAAiB;cAAAC,QAAA,EAC9BQ,QAAQ,CAACxB,MAAM,KAAK,WAAW,GAAG,WAAW,GAAG;YAAQ;cAAAiB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrD;UACP;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,EACLI,QAAQ,CAACtE,aAAa,iBACrBjB,OAAA;YAAK8E,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBACtC/E,OAAA;cAAA+E,QAAA,EAAQ;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAACI,QAAQ,CAACtE,aAAa;UAAA;YAAA+D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CACN;QAAA,GApDOI,QAAQ,CAACU,GAAG;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAqDjB,CAAC;MAAA,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAELf,kBAAkB,CAACtB,MAAM,KAAK,CAAC,iBAC9B9C,OAAA;MAAK8E,SAAS,EAAC,aAAa;MAAAC,QAAA,eAC1B/E,OAAA;QAAA+E,QAAA,GAAG,KAAG,EAACpE,MAAM,KAAK,KAAK,GAAGA,MAAM,GAAG,EAAE,EAAC,4BAA0B;MAAA;QAAAqE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjE,CACN,EAGAtE,YAAY,CAACE,OAAO,iBACnBf,OAAA;MAAK8E,SAAS,EAAC,eAAe;MAACM,OAAO,EAAEA,CAAA,KAAMtE,eAAe,CAAC;QAAEC,OAAO,EAAE,KAAK;QAAEC,UAAU,EAAE;MAAK,CAAC,CAAE;MAAA+D,QAAA,eAClG/E,OAAA;QAAK8E,SAAS,EAAC,eAAe;QAACM,OAAO,EAAEc,CAAC,IAAIA,CAAC,CAACC,eAAe,CAAC,CAAE;QAAApB,QAAA,gBAC/D/E,OAAA;UAAA+E,QAAA,EAAI;QAAuB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAChCnF,OAAA;UAAA+E,QAAA,EAAG;QAAsC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAC7CnF,OAAA;UACEoG,KAAK,EAAEnF,aAAc;UACrBoF,QAAQ,EAAGH,CAAC,IAAKhF,gBAAgB,CAACgF,CAAC,CAACI,MAAM,CAACF,KAAK,CAAE;UAClDG,WAAW,EAAC,iEAAiE;UAC7EzB,SAAS,EAAC;QAAkB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7B,CAAC,eACFnF,OAAA;UAAK8E,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5B/E,OAAA;YACE8E,SAAS,EAAC,mBAAmB;YAC7BM,OAAO,EAAEA,CAAA,KAAMtE,eAAe,CAAC;cAAEC,OAAO,EAAE,KAAK;cAAEC,UAAU,EAAE;YAAK,CAAC,CAAE;YAAA+D,QAAA,EACtE;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTnF,OAAA;YACE8E,SAAS,EAAC,gBAAgB;YAC1BM,OAAO,EAAER,aAAc;YAAAG,QAAA,EACxB;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC/E,EAAA,CArQID,eAAe;AAAAqG,EAAA,GAAfrG,eAAe;AAuQrB,eAAeA,eAAe;AAAC,IAAAqG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}